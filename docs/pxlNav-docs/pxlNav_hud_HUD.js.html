<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>pxlNav/hud/HUD.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://procstack.github.io/Outlet.htm" target="_blank" class="menu-item" id="pxlNav_Example" >pxlNav Example : The Outlet</a></h2><h3>Global</h3><ul><li><a href="global.html##pxlEnums">#pxlEnums</a></li><li><a href="global.html#pxlOptions">pxlOptions</a></li><li><a href="global.html#pxlUserSettings">pxlUserSettings</a></li></ul><h3>Modules</h3><ul><li><a href="module-pxlNav.html">pxlNav</a></li><li><a href="pxlNav.module_pxlEffects.html">pxlNav.pxlEffects</a></li><li><a href="pxlNav.pxlEffects.module_pxlParticles.html">pxlNav.pxlEffects.pxlParticles</a></li></ul><h3>Classes</h3><ul><li><a href="pxlAnim.html">pxlAnim</a><ul class='methods'><li data-type='method'><a href="pxlAnim.html#.Animation#addClips">Animation#addClips</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#destroy">Animation#destroy</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#getMesh">Animation#getMesh</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#getMixer">Animation#getMixer</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#getRig">Animation#getRig</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#hasClip">Animation#hasClip</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#initObject">Animation#initObject</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#playClip">Animation#playClip</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#setStateConnections">Animation#setStateConnections</a></li><li data-type='method'><a href="pxlAnim.html#.Animation#setWeight">Animation#setWeight</a></li></ul></li><li><a href="pxlCamera.html">pxlCamera</a><ul class='methods'><li data-type='method'><a href="pxlCamera.html#.Camera#setCameraRotateEasing">Camera#setCameraRotateEasing</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setGravityMax">Camera#setGravityMax</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setGravityRate">Camera#setGravityRate</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setInputMovementMult">Camera#setInputMovementMult</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setJumpHoldMax">Camera#setJumpHoldMax</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setJumpImpulse">Camera#setJumpImpulse</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setJumpRepeatDelay">Camera#setJumpRepeatDelay</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setJumpScalar">Camera#setJumpScalar</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setMaxStepHeight">Camera#setMaxStepHeight</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setMovementEase">Camera#setMovementEase</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setMovementMax">Camera#setMovementMax</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setMovementScalar">Camera#setMovementScalar</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setPositionBlend">Camera#setPositionBlend</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setTouchSensitivity">Camera#setTouchSensitivity</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setUserHeight">Camera#setUserHeight</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setUserScale">Camera#setUserScale</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setUserSettings">Camera#setUserSettings</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setWalkBounceEaseIn">Camera#setWalkBounceEaseIn</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setWalkBounceEaseOut">Camera#setWalkBounceEaseOut</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setWalkBounceHeight">Camera#setWalkBounceHeight</a></li><li data-type='method'><a href="pxlCamera.html#.Camera#setWalkBounceRate">Camera#setWalkBounceRate</a></li></ul></li><li><a href="pxlEnums.html">pxlEnums</a><ul class='methods'><li data-type='method'><a href="pxlEnums.html#.ANTI_ALIASING">ANTI_ALIASING</a></li><li data-type='method'><a href="pxlEnums.html#.CAMERA_EVENT">CAMERA_EVENT</a></li><li data-type='method'><a href="pxlEnums.html#.COLLIDER_TYPE">COLLIDER_TYPE</a></li><li data-type='method'><a href="pxlEnums.html#.COLOR_SHIFT">COLOR_SHIFT</a></li><li data-type='method'><a href="pxlEnums.html#.DEVICE_ACTION">DEVICE_ACTION</a></li><li data-type='method'><a href="pxlEnums.html#.DEVICE_EVENT">DEVICE_EVENT</a></li><li data-type='method'><a href="pxlEnums.html#.DEVICE_TYPE">DEVICE_TYPE</a></li><li data-type='method'><a href="pxlEnums.html#.GEOMETRY_SIDE">GEOMETRY_SIDE</a></li><li data-type='method'><a href="pxlEnums.html#.HUD_ACTION">HUD_ACTION</a></li><li data-type='method'><a href="pxlEnums.html#.HUD_ELEMENT">HUD_ELEMENT</a></li><li data-type='method'><a href="pxlEnums.html#.RENDER_LAYER">RENDER_LAYER</a></li><li data-type='method'><a href="pxlEnums.html#.SHADOW_MAP">SHADOW_MAP</a></li><li data-type='method'><a href="pxlEnums.html#.SKY_HAZE">SKY_HAZE</a></li><li data-type='method'><a href="pxlEnums.html#.USER_SPEED">USER_SPEED</a></li><li data-type='method'><a href="pxlEnums.html#.VERBOSE_LEVEL">VERBOSE_LEVEL</a></li></ul></li><li><a href="pxlHUD.html">pxlHUD</a><ul class='methods'><li data-type='method'><a href="pxlHUD.html#.HUD#addItem">HUD#addItem</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#addToHUD">HUD#addToHUD</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#createButton">HUD#createButton</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#createDragRegion">HUD#createDragRegion</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#createImage">HUD#createImage</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#createRegion">HUD#createRegion</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#createSlider">HUD#createSlider</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#createText">HUD#createText</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#createThumbstick">HUD#createThumbstick</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#emit">HUD#emit</a></li><li data-type='method'><a href="pxlHUD.html#.HUD#subscribe">HUD#subscribe</a></li></ul></li><li><a href="pxlParticles_BillowSmoke.html">pxlParticles/BillowSmoke</a><ul class='methods'><li data-type='method'><a href="pxlParticles_BillowSmoke.html#.BillowSmoke#build">BillowSmoke#build</a></li></ul></li><li><a href="pxlParticles_EmberWisps.html">pxlParticles/EmberWisps</a><ul class='methods'><li data-type='method'><a href="pxlParticles_EmberWisps.html#.EmberWisps#build">EmberWisps#build</a></li></ul></li><li><a href="pxlParticles_FloatingDust.html">pxlParticles/FloatingDust</a><ul class='methods'><li data-type='method'><a href="pxlParticles_FloatingDust.html#.FloatingDust#build">FloatingDust#build</a></li></ul></li><li><a href="pxlParticles_HeightMap.html">pxlParticles/HeightMap</a><ul class='methods'><li data-type='method'><a href="pxlParticles_HeightMap.html#.HeightMap#build">HeightMap#build</a></li><li data-type='method'><a href="pxlParticles_HeightMap.html#.HeightMap#setHeightMapPath">HeightMap#setHeightMapPath</a></li><li data-type='method'><a href="pxlParticles_HeightMap.html#.HeightMap#setSpawnMapPath">HeightMap#setSpawnMapPath</a></li></ul></li><li><a href="pxlParticles_ParticleBase.html">pxlParticles/ParticleBase</a><ul class='methods'><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#addToScene">ParticleBase#addToScene</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#atlasArrayPicker">ParticleBase#atlasArrayPicker</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#atlasRandomGen">ParticleBase#atlasRandomGen</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#atlasRandomList">ParticleBase#atlasRandomList</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#dupeArray">ParticleBase#dupeArray</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#elementDuplicator">ParticleBase#elementDuplicator</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#getSettings">ParticleBase#getSettings</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#hasPointLights">ParticleBase#hasPointLights</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#newMaterial">ParticleBase#newMaterial</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#setAtlasPath">ParticleBase#setAtlasPath</a></li><li data-type='method'><a href="pxlParticles_ParticleBase.html#.ParticleBase#setPosition">ParticleBase#setPosition</a></li></ul></li><li><a href="pxlRoom%2520RoomEnvironment.html">pxlRoom RoomEnvironment</a><ul class='methods'><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#addColliderHelper">addColliderHelper</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#animPostLoad">animPostLoad</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#applyRoomPass">applyRoomPass</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#build">build</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#castRay">castRay</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#cleanupPortalRender">cleanupPortalRender</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#fbxPostLoad">fbxPostLoad</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#getArtistInfo">getArtistInfo</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#getColliders">getColliders</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#getCurrentShader">getCurrentShader</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#getLerpAvgRate">getLerpAvgRate</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#getLerpRate">getLerpRate</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#getName">getName</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#getShaderList">getShaderList</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#hasColliderType">hasColliderType</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#hasColliders">hasColliders</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#hitColliders">hitColliders</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#init">init</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#onMessage">onMessage</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#prepPortalRender">prepPortalRender</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#readShader">readShader</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#resetCamera">resetCamera</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#resize">resize</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#setDependencies">setDependencies</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#setFog">setFog</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#setPortalTexture">setPortalTexture</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#setShader">setShader</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#setUserHeight">setUserHeight</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#start">start</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#step">step</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#stepColliderHelper">stepColliderHelper</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#stop">stop</a></li><li data-type='method'><a href="pxlRoom%252520RoomEnvironment.html#toCameraPos">toCameraPos</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="pxlAudio.html">pxlAudio</a></li><li><a href="pxlAutoCam.html">pxlAutoCam</a></li><li><a href="pxlColliders.html">pxlColliders</a></li><li><a href="pxlCookie.html">pxlCookie</a></li><li><a href="pxlDevice.html">pxlDevice</a></li><li><a href="pxlEnv.html">pxlEnv</a></li><li><a href="pxlFile.html">pxlFile</a></li><li><a href="pxlGuiDraws.html">pxlGuiDraws</a></li><li><a href="pxlQuality.html">pxlQuality</a></li><li><a href="pxlTimer.html">pxlTimer</a></li><li><a href="pxlUser.html">pxlUser</a></li><li><a href="pxlUtils.html">pxlUtils</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">pxlNav/hud/HUD.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Heads-Up-Display (HUD) class for PxlNav
//   Written by Kevin Edzenga, 2025
// -- -- -- -- -- -- -- -- -- -- -- --
//
// Init() is called after pxlRoom's have loaded and post processing has been applied
//   All room items and collider object triggers are loaded and ready for HUD visual display
//
// Initial pass on this class is handling events within the class
//   Will move to EventManager class once the HUD is fully functional
//     (EventManager class isn't fully integrated yet)
//


import { DEVICE_ACTION, HUD_DRAW, HUD_ELEMENT } from "../core/Enums.js";

import { ElementBase } from "./elements/elementBase.js";
import { DragRegion } from "./elements/dragRegion.js";
import { Thumbstick } from "./elements/thumbstick.js";


/**
 * Class to handle a Heads-Up Display (HUD) management for pxlNav.
 *   Examples should be ran from your `pxlRoom.build()` function --
 * @alias pxlHUD
 * @class
 * @description HUD drawing and management
 * @example
 * // Add a button to the HUD from your room
 * let buttonData = { 'style': ['my-button-style'] };
 * this.pxlHUD.addItem('myButton', HUD_ELEMENT.BUTTON, buttonData, () => {
 *   console.log('Button clicked!');
 * });
 * @example
 * // Add a draggable region to the HUD from your room
 * let dragData = { 'style': ['my-drag-style'] };
 * this.pxlHUD.addItem('myDragRegion', HUD_ELEMENT.DRAG_REGION, dragData, ( data ) => {
 *   // data = { type = pxlEnum, name='myDragRegion', value={ x: number, y: number } };
 *   console.log('Drag delta / relative offset : ', data.value );
 * });
 * @example
 * // Add a thumbstick to the HUD from your room
 * let thumbData = { 'style': ['my-thumbstick-style'] };
 * this.pxlHUD.addItem('myThumbstick', HUD_ELEMENT.THUMBSTICK, thumbData, ( data ) => {
 *   // data = { type = pxlEnum, name='myThumbstick', value={ x: number (-1 to 1), y: number (-1 to 1) } };
 *   console.log('Thumbstick value : ', data.value );
 * });
 */
export class HUD{
  /**
   * Create a new HUD instance.
   */
  constructor(){
    /**
     * @type {Object|null}
     */
    this.pxlOptions = null;
    /**
     * @type {Object|null}
     */
    this.pxlEnums = null;
    /**
     * @type {Object|null}
     */
    this.pxlGuiDraws = null;
    /**
     * @type {Object|null}
     */
    this.pxlDevice = null;

    /**
     * @type {HTMLElement|null}
     */
    this.hudParent = null;
    /**
     * @type {Object}
     */
    this.huds = {};

    /**
     * @type {Object}
     */
    this.mobileHUD = {};


  }

  // -- -- --

  /**
   * Set dependencies for the HUD.
   * @param {Object} pxlNav - The pxlNav instance containing dependencies.
   * @private
   */
  setDependencies( pxlNav ){
    this.pxlOptions = pxlNav.pxlOptions;
    this.pxlEnums = pxlNav.pxlEnums;
    this.pxlGuiDraws = pxlNav.pxlGuiDraws;
    this.pxlDevice = pxlNav.pxlDevice;
  }

  // -- -- --

  /**
   * Initialize the HUD.
   * @private
   */
  init(){

    let hudParent = document.createElement('div');
    hudParent.classList.add('pxlNav-hud-parent');
    this.pxlGuiDraws.addToContainer( hudParent );
    this.hudParent = hudParent;

    // Add mobile hud elements
    //   Thumbsticks, jump + run empty regions
    if( this.pxlOptions.mobile &amp;&amp; !this.pxlOptions.staticCamera ){
      hudParent.classList.add('pxlNav-hud-parent-mobile');
      this.createMobileHUD();
    }
  }

  /**
   * Add an element to the HUD DOM Object.
   * @method
   * @memberof pxlHUD
   * @param {HTMLElement|Object} hudElement - The HUD element to add.
   * @example
   * //Add an created element to the managed HUD or specific parent
   * let newButton = this.pxlHUD.createButton('myButton', buttonData, ( data )=>{
   *   console.log('Button clicked!');
   * });
   * 
   * this.pxlHUD.addToHUD( newButton );
   */
  addToHUD( hudElement ){
    if( hudElement.hasOwnProperty('block') &amp;&amp; hudElement.block !== null ){
      this.hudParent.appendChild( hudElement.block );
    }else if( hudElement?.object !== null ){
      this.hudParent.appendChild( hudElement.object );
    }else{
      this.hudParent.appendChild( hudElement );
    }
  }

  // -- -- --

  /**
   * Add an item to the HUD.
   * @method
   * @memberof pxlHUD
   * @param {string} [label='default'] - The label for the HUD item.
   * @param {string} type - The type of HUD element.
   * @param {Object} data - The data for the HUD element.
   * @param {Function|null} [callbackFn=null] - The callback function for the HUD element.
   * @param {Object|null} [parentObj=null] - The parent object for the HUD element.
   * @returns {Object|null} The created HUD element.
   * @example
   * // Add a button to the HUD
   * //   Subscription passed through the `addItem()` function
   * //   Its preferer you use this function over directly creating HUD elements
   * //     As pxlHUD can manage the HUD elements and their subscriptions
   * let buttonData = { 'style': ['my-button-style'] };
   * this.pxlHUD.addItem('myButton', HUD_ELEMENT.BUTTON, buttonData, () => {
   *   console.log('Button clicked!');
   * });
   * 
   * // Add a draggable region to the HUD
   * //   Subscription called after hud element creation
   * let dragData = { 'style': ['my-drag-style'] };
   * this.pxlHUD.addItem('myDragRegion', HUD_ELEMENT.DRAG_REGION, dragData);
   *  // [...] // Later in your code
   * this.pxlHUD.subscribe('myDragRegion', ( data ) => {
   *   console.log('Drag delta / relative offset : ', data.value );
   * });
   */
  addItem( label='default', type, data, callbackFn = null, parentObj = null ){
    if( !this.huds.hasOwnProperty( label ) ){
      this.huds[ label ] = [];
    }
    let curRegion = null;

    switch( type ){
      case HUD_ELEMENT.REGION:
        curRegion = this.createRegion( label, data, callbackFn, parentObj );
        this.huds[ label ].push( curRegion );
        break;
      case HUD_ELEMENT.DRAG_REGION:
        curRegion = this.createDragRegion( label, data, callbackFn, parentObj );
        this.huds[ label ].push( curRegion );
        break;
      case HUD_ELEMENT.BUTTON:
        curRegion = this.createButton( label, data, callbackFn, parentObj );
        this.huds[ label ].push( curRegion );
        break;
      case HUD_ELEMENT.THUMBSTICK:
        curRegion = this.createThumbstick( label, data, callbackFn, parentObj );
        this.huds[ label ].push( curRegion );
        break;
      case HUD_ELEMENT.SLIDER:
        curRegion = this.createSlider( label, data, callbackFn, parentObj );
        this.huds[ label ].push( curRegion );
        break;
      case HUD_ELEMENT.IMAGE:
        curRegion = this.createImage( label, data, callbackFn, parentObj );
        this.huds[ label ].push( curRegion );
        break;
      case HUD_ELEMENT.TEXT:
        curRegion = this.createText( label, data, callbackFn, parentObj );
        this.huds[ label ].push( curRegion );
        break;
      default:
        break;
    }

    if( curRegion !== null ){

      if( parentObj !== null ){
        parentObj.appendChild( curRegion.object );
      }else{
        // Add new HUD element to the DOM
        this.addToHUD( curRegion );
      }

      // Subscribe to the HUD element if callbackFn provided
      if( callbackFn !== null ){
        curRegion.subscribe( callbackFn );
      }
    }

    return curRegion;
  }

  // -- -- --

  /**
   * Create a region element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label for the region.
   * @param {Object} data - The data for the region.
   * @param {Function|null} [callbackFn=null] - The callback function for the region.
   * @returns {Object} The created region element.
   * @example
   * // Create a region element
   * let regionData = { 'style': ['my-region-style'] };
   * let newRegion = this.pxlHUD.createRegion('myRegion', regionData, ( data )=>{
   *   console.log( 'Region clicked!' );
   *   console.log( data );
   * });
   * this.pxlHUD.addToHUD( newRegion );
   */
  createRegion( label, data, callbackFn=null, parentObj=null ){
    let region = new ElementBase( label, data );
    region.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );
    region.build();

    if(callbackFn !== null){
      region.subscribe( callbackFn );
    }
    if( parentObj !== null ){
      parentObj.appendChild( region.object );
    }

    return region;
  }

  /**
   * Create a draggable region element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label for the draggable region.
   * @param {Object} data - The data for the draggable region.
   * @param {Function|null} [callbackFn=null] - The callback function for the draggable region.
   * @returns {Object} The created draggable region element.
   * @example
   * // Create a draggable region element
   * let dragData = { 'style': ['my-drag-style'] };
   * let newDragRegion = this.pxlHUD.createDragRegion('myDragRegion', dragData, ( data )=>{
   *  console.log( 'Drag delta / relative offset {X,Y} :' );
   *  console.log( data.value );
   * });
   * this.pxlHUD.addToHUD( newDragRegion );
   */
  createDragRegion( label, data, callbackFn=null, parentObj=null ){
    let dragRegion = new DragRegion( label, data );
    dragRegion.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );
    dragRegion.build();

    if(callbackFn !== null){
      dragRegion.subscribe( callbackFn );
    }
    if( parentObj !== null ){
      parentObj.appendChild( dragRegion.object );
    }

    return dragRegion;
  }

  /**
   * Create a button element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label for the button.
   * @param {Object} data - The data for the button.
   * @param {Function|null} [callbackFn=null] - The callback function for the button.
   * @returns {Object} The created button element.
   * @example
   * // Create a button element
   * let buttonData = { 'style': ['my-button-style'] };
   * let newButton = this.pxlHUD.createButton('myButton', buttonData, ( data )=>{
   *   console.log( 'Button clicked!' );
   * });
   * this.pxlHUD.addToHUD( newButton );
   */
  createButton( label, data, callbackFn=null, parentObj=null ){
    let button = new ElementBase( label, data );
    button.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );
    button.build();

    if(callbackFn !== null){
      button.subscribe( callbackFn );
    }
    if( parentObj !== null ){
      parentObj.appendChild( button.object );
    }

    return button;
  }

  /**
   * Create a thumbstick element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label for the thumbstick.
   * @param {Object} data - The data for the thumbstick.
   * @param {Function|null} [callbackFn=null] - The callback function for the thumbstick.
   * @returns {Object} The created thumbstick element.
   * @example
   * // Create a thumbstick element
   * let thumbstickData = { 'style': ['my-thumbstick-style'] };
   * let newThumbstick = this.pxlHUD.createThumbstick('myThumbstick', thumbstickData, ( data )=>{
   *   console.log( 'Thumbstick value changed!' );
   *   console.log( data );
   * });
   * this.pxlHUD.addToHUD( newThumbstick );
   */
  createThumbstick( label, data, callbackFn=null ){

    let thumbstickObj = new Thumbstick( label, data );
    thumbstickObj.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );
    thumbstickObj.build();

    // Connect thumbstick interactions to listeners
    if( callbackFn !== null ){
      thumbstickObj.subscribe( callbackFn );
    }

    return thumbstickObj;
  }

  /**
   * Create a slider element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label for the slider.
   * @param {Object} data - The data for the slider.
   * @param {Function|null} [callbackFn=null] - The callback function for the slider.
   * @returns {Object} The created slider element.
   * @example
   * // Create a slider element
   * let sliderData = { 'min': 0, 'max': 100, 'value': 50, 'style': ['my-slider-style'] };
   * let newSlider = this.pxlHUD.createSlider('mySlider', sliderData, ( data )=>{
   *   console.log( 'Slider value changed!' );
   *   console.log( data );
   * });
   * this.pxlHUD.addToHUD( newSlider );
   */
  createSlider( label, data, callbackFn=null, parentObj=null ){
    let slider = new ElementBase( label, data );
    slider.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );
    slider.build();

    if(callbackFn !== null){
      slider.subscribe( callbackFn );
    }
    if( parentObj !== null ){
      parentObj.appendChild( slider.object );
    }

    return slider;
  }

  /**
   * Create an image element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label for the image.
   * @param {Object} data - The data for the image.
   * @param {Function|null} [callbackFn=null] - The callback function for the image.
   * @returns {Object} The created image element.
   * @example
   * // Create an image element
   * let imageData = { 'src': 'path/to/image.png', 'style': ['my-image-style'] };
   * let newImage = this.pxlHUD.createImage('myImage', imageData, ( data )=>{
   *   console.log( 'Image clicked!' );
   * });
   * this.pxlHUD.addToHUD( newImage );
   */
  createImage( label, data, callbackFn=null, parentObj=null ){
    let image = new ElementBase( label, data );
    image.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );
    image.build();

    if(callbackFn !== null){
      image.subscribe( callbackFn );
    }
    if( parentObj !== null ){
      parentObj.appendChild( image.object );
    }

    return image;
  }

  /**
   * Create a text element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label for the text.
   * @param {Object} data - The data for the text.
   * @param {Function|null} [callbackFn=null] - The callback function for the text.
   * @returns {Object} The created text element.
   * @example
   * // Create a text element
   * let textData = { 'text': 'Hello, world!', 'style': ['my-text-style'] };
   * let newText = this.pxlHUD.createText('myText', textData, ( data )=>{
   *   console.log( 'Text clicked!' );
   * });
   * this.pxlHUD.addToHUD( newText );
   */
  createText( label, data, callbackFn=null, parentObj=null ){
    let text = new ElementBase( label, data );
    text.setDependencies( { 'pxlOptions':this.pxlOptions, 'pxlEnums':this.pxlEnums, 'pxlDevice':this.pxlDevice } );
    text.build();

    if(callbackFn !== null){
      text.subscribe( callbackFn );
    }
    if( parentObj !== null ){
      parentObj.appendChild( text.object );
    }

    return text;
  }

  // -- -- --

  /**
   * Create mobile HUD elements.
   * @private
   */
  createMobileHUD(){
    let curId = '';
    let curElement = '';
    let curData = {};

    let mobileHudParent = document.createElement('div');
    mobileHudParent.classList.add('pxlNav-hudMobile-parent');
    mobileHudParent.classList.add();

    this.hudParent.appendChild( mobileHudParent );

    let noneState = this.pxlEnums.HUD_ACTION.NONE;
    let hoverState = this.pxlEnums.HUD_ACTION.HOVER;
    let activeState = this.pxlEnums.HUD_ACTION.ACTIVE;

    // Virtual thumbsticks with dragable inner peg
    curId = 'thumbstick_left';
    curData = {
       'style': [ 'pxlNav-hudMobile-joystick-left' ],
       'objectStyles': [
          {
            'object': 'block',
          },
          {
            'object': 'parent',
          },
          {
            'object': 'inner',
          },
        ]
      };
      curData['objectStyles'][0][noneState] = ['pxlNav-hudElement-thumbstick-block-default'];
      curData['objectStyles'][0][hoverState] = ['pxlNav-hudElement-thumbstick-block-hover'];
      curData['objectStyles'][0][activeState] = ['pxlNav-hudElement-thumbstick-block-active'];

      curData['objectStyles'][1][noneState] = ['pxlNav-hudElement-thumbstick-default'];
      curData['objectStyles'][1][hoverState] = ['pxlNav-hudElement-thumbstick-hover'];
      curData['objectStyles'][1][activeState] = ['pxlNav-hudElement-thumbstick-active', 'pxlNav-hudElement-thumbstick-left'];

      curData['objectStyles'][2][noneState] = ['pxlNav-hudElement-thumbstick-inner-default'];
      curData['objectStyles'][2][hoverState] = ['pxlNav-hudElement-thumbstick-inner-hover'];
      curData['objectStyles'][2][activeState] = ['pxlNav-hudElement-thumbstick-inner-active'];

    
    curElement = this.addItem( curId, HUD_ELEMENT.THUMBSTICK, Object.assign({},curData) );

    // Connect movement joystick to device actions
    curElement.subscribe(( deltas )=>{
      this.mobileDeligate( DEVICE_ACTION.MOVE, deltas );
    });

    this.mobileHUD[ curId ] = curElement;

    // -- -- --

    curId =  'thumbstick_right';
    
    curData = Object.assign({},curData);
    curData['style'] = [ 'pxlNav-hudMobile-joystick-right' ];
    curData['objectStyles'][1] = { 'object': 'parent' };
    curData['objectStyles'][1][noneState] = ['pxlNav-hudElement-thumbstick-default'];
    curData['objectStyles'][1][hoverState] = ['pxlNav-hudElement-thumbstick-hover'];
    curData['objectStyles'][1][activeState] = ['pxlNav-hudElement-thumbstick-active', 'pxlNav-hudElement-thumbstick-right'];

    curElement = this.addItem( curId, HUD_ELEMENT.THUMBSTICK, curData );

    // Connect look joystick to device actions
    curElement.subscribe(( deltas )=>{
      this.mobileDeligate( DEVICE_ACTION.LOOK, deltas );
    });

    this.mobileHUD[ curId ] = curElement;

    // -- -- --


    // Empty tap reagions for mobile jump &amp; run
    curId = 'mobile_jump';
    curData = { 'style': [ 'pxlNav-hudMobile-region-jump' ] };
    curElement = this.addItem( curId, HUD_ELEMENT.REGION, curData, ( e )=>{
      this.mobileDeligate( DEVICE_ACTION.JUMP, {}, e );
    } );

    this.mobileHUD[ 'jump' ] = curElement;

    // -- -- --

    curId =  'mobile_ACTION';
    curData = { 'style': [ 'pxlNav-hudMobile-region-action' ] };
    curElement = this.addItem( curId, HUD_ELEMENT.REGION, curData );

    // Connect item region to device actions
    curElement.subscribe(( e )=>{
      this.mobileDeligate( DEVICE_ACTION.ACTION, e );
    });

    this.mobileHUD[ 'item' ] = curElement;



  }

  // -- -- --

  /**
   * Handle mobile HUD interactions to the device.
   * @param {pxlEnum} eventType - The type of event.
   * @param {Object} data - The data for the event.
   * @private
   */
  mobileDeligate( eventType, data={}, status=true ){
    this.pxlDevice.deviceAction( eventType, data, status );
  }


  // -- -- --

  /**
   * Subscribe to a HUD element's events.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label of the HUD element.
   * @param {Function} callbackFn - The callback function to subscribe.
   * @example
   * // Subscribe to a HUD element
   * let newButton = this.pxlHUD.addItem( 'myButton', HUD_ELEMENT.BUTTON );
   * this.pxlHUD.subscribe( 'myButton', ( data )=>{
   *   console.log( 'Button clicked!' );
   * });
   */
  subscribe( label, callbackFn ){
    if( this.huds.hasOwnProperty( label ) ){
      if( !this.huds[ label ].hasOwnProperty('callbacks') ){
        this.huds[ label ].callbacks = [];
      }
      this.huds[ label ].callbacks.push( callbackFn );
    }
  }

  /**
   * Emit an event for a HUD element.
   * @method
   * @memberof pxlHUD
   * @param {string} label - The label of the HUD element.
   * @param {Object} data - The data for the event.
   */
  emit( label, data ){
    if( this.huds.hasOwnProperty( label ) &amp;&amp; this.huds[ label ].hasOwnProperty('callbacks') ){
      this.huds[ label ].callbacks.forEach( (fn)=>{
        fn( data );
      });
    }
  }

}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Thu Mar 06 2025 21:01:18 GMT-0500 (Eastern Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



    <script src="https://unpkg.com/mermaid/dist/mermaid.js"></script>
    
    <script src="docs-init.js"></script>
    
</body>
</html>
